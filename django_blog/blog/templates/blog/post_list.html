{% extends "blog/base.html" %}
{% block content %}
<h2>All Blog Posts</h2>

{% if user.is_authenticated %}
    <a href="{% url 'post_create' %}">Create New Post</a>
{% endif %}

{% for post in posts %}
    <article>
        <h3>
            <a href="{% url 'post_detail' post.pk %}">
                {{ post.title }}
            </a>
        </h3>
        <p>{{ post.content|truncatewords:20 }}</p>
        <small>By {{ post.author }} | {{ post.published_date }}</small>
    </article>
    <hr>
{% empty %}
    <p>No posts available.</p>
{% endfor %}

{% endblock %}